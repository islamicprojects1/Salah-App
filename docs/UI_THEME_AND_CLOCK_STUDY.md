# دراسة شاملة: الثيم والألوان والساعة

## 1. المشاكل الحالية

### 1.1 الألوان والتباين (Contrast)
- **أصفر وأغمق**: التطبيق يعتمد على أصفر ذهبي كثانوي (secondary) في عدة أماكن — قد يبدو باهتاً أو ضعيف التباين على خلفية داكنة
- **خطوط لا تظهر جيداً**: بعض النصوص تستخدم ألواناً قريبة من الخلفية، خصوصاً في Dark mode
- **استخدام ثابت**: صفحات مثل صفحة القبلة تستخدم `AppColors.primaryDark` فقط — لا تتكيف مع الثيم

### 1.2 صفحات بدون دعم الثيم
| الصفحة | الوضع الحالي |
|--------|--------------|
| QiblaScreen | خلفية ثابتة `AppColors.primaryDark` — لا يتغير مع Light/Dark |
| Login/Register | خلفية خضراء ثابتة |
| ProfileScreen | خلفية primaryDark |
| MissedPrayersScreen | ألوان ثابتة |
| Onboarding | ألوان فاتحة ثابتة |

### 1.3 الساعة (SmartPrayerCircle)
- **غير مفهومة**: دمج الساعة التناظرية مع مواقيت الصلاة مربك للمستخدم
- **حواف سيئة**: الحواف الخارجية والسجلات (ticks) غير واضحة
- **تباين ضعيف**: الأرقام والنقاط في Dark mode قد لا تظهر جيداً
- **شكل مزدوج**: الساعة تعرض الوقت الحقيقي + قوس الصلاة القادمة — قد يبدو مزدحماً

---

## 2. الثيم الموحد (Dark + Light)

### 2.1 المبادئ
- جميع الصفحات تستخدم `Theme.of(context)` أو `AppColors` الديناميكية (`textPrimary`, `surface`, `background`)
- تجنّب `Colors.white` و`Colors.black` المباشرة — استخدم `AppColors.textPrimary` أو `Theme.of(context).colorScheme`
- صفحة القبلة: دعم Light و Dark — خلفية و ألوان النص تتغير حسب الثيم

### 2.2 تحسين التباين
- **Dark mode**: `textPrimary` = #E0E0E0 على خلفية #121212 — نسبة تباين جيدة
- **تحسين**: تقليل استخدام الأصفر (secondary) للنصوص المهمة؛ استخدام أبيض/رمادي فاتح للنصوص في Dark
- **الأزرار والشارات**: استخدام `colorScheme.primary` مع `colorScheme.onPrimary` لضمان تباين آمن

### 2.3 خطة تطبيق الثيم
1. إنشاء `ThemeAwareColors` أو توسيع `AppColors` لدعم `context` عند الحاجة
2. تعديل QiblaScreen: استبدال `AppColors.primaryDark` بـ `Theme.of(context).scaffoldBackgroundColor` وضبط ألوان النصوص
3. مراجعة جميع الصفحات واستبدال الألوان الثابتة بألوان من الثيم
4. اختبار WCAG 2.1: نسبة تباين 4.5:1 للنص العادي و 3:1 للنص الكبير

---

## 3. أفكار للساعة

### 3.1 المشاكل الحالية
- ساعة تناظرية + قوس الصلاة القادمة في نفس الدائرة
- أرقام 1–12 قد لا تكون مفهومة للمستخدم العربي المعتاد على 24 ساعة
- حواف غير واضحة، نقاط الدقائق باهتة

### 3.2 أفكار مقترحة

#### أ. ساعة دائرية بسيطة
- إزالة الأرقام 1–12 واستبدالها بـ 12 علامة فقط (لا أرقام)
- عرض الوقت الرقمي كبير وواضح في المنتصف
- قوس الصلاة القادمة كطبقة منفصلة حول الحافة
- حواف ناعمة مع ظل بسيط

#### ب. ساعة نصف دائرية (Arc)
- نصف دائرة فقط (180°) — أقل ازدحاماً
- الوقت الحالي في المنتصف
- قوس ملون للصلاة القادمة يملأ من 0 إلى نسبة الوقت المتبقي
- نص "الفجر بعد 54 دقيقة" تحت الساعة

#### ج. ساعة رقمية مع قوس دائري
- وقت رقمي كبير (مثل 4:54)
- قوس دائري صغير تحت الوقت يوضح نسبة الوقت حتى الصلاة القادمة
- تسمية واضحة: "القادمة: الفجر — 00:54"

#### د. بطاقة وقت الصلاة (بديل للساعة)
- بطاقة كبيرة تعرض: الوقت الحالي + الصلاة القادمة + العد التنازلي
- تصميم يشبه البطاقات بدون ساعة تناظرية
- الضغط على البطاقة لتسجيل الصلاة عند وقتها

#### هـ. ساعة مع مقاطع ملونة
- تقسيم الدائرة إلى 5 أقسام (فجر، ظهر، عصر، مغرب، عشاء)
- القسم الحالي مضيء، القادم بلون مميز
- إبرة واحدة تشير للوقت الحالي ضمن القسم الحالي

### 3.3 التوصية
- **خيار ج**: ساعة رقمية واضحة + قوس بسيط — أبسط وأكثر قابلية للفهم
- أو **خيار أ**: تبسيط الساعة الحالية (إزالة الأرقام، تحسين الحواف، تكبير النص المركزي)

---

## 4. خطة التنفيذ المقترحة

### المرحلة 1 — الثيم (أولوية عالية)
1. [ ] تحديث QiblaScreen لدعم Dark/Light
2. [ ] مراجعة SmartPrayerCircle: استخدام ألوان الثيم بدل الثابتة
3. [ ] استبدال `Colors.white` و`Colors.black` بـ ألوان من الثيم حيث يناسب
4. [ ] اختبار التباين في Dark و Light

### المرحلة 2 — الساعة (أولوية متوسطة)
1. [ ] اختيار نموذج الساعة (مثلاً: ج أو أ)
2. [ ] تصميم المكونات (أقواس، أرقام، حواف)
3. [ ] تحسين الحواف والظلال
4. [ ] اختبار وضوح الساعة على أجهزة مختلفة

### المرحلة 3 — الألوان (أولوية متوسطة)
1. [ ] تعديل ألوان الثانوية إن لزم (تقليل الأصفر الباهت)
2. [ ] ضبط تباين النصوص الثانوية
3. [ ] مراجعة صفحات Auth و Onboarding للتناسق مع الثيم

---

## 5. مراجع

- [Material Design - Dark theme](https://m3.material.io/styles/color/dark-theme/overview)
- [WCAG Contrast Guidelines](https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html)
- Aladhan API للمقارنة مع تطبيقات أوقات صلاة أخرى
